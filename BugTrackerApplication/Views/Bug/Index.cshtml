@model IEnumerable<BugTrackerApplication.Models.Bug>

@{
    ViewBag.Title = "Index";
}

<h2>View All Reported Bugs</h2>

@Html.ActionLink("Create New", "CreateBug")

<div style="text-align:right">
    @if (User != null)
    {
        @Html.ActionLink("Logout", "LogOut", "Home");
    }
</div>


<div style="font-family:Arial">
    @using (Html.BeginForm())
    {
        <b>Name:</b>
        @Html.TextBox("searchTerm", null, new { id = "txtSearch" })
        <input type="submit" value="Search" />
        <p></p>        <p></p>
    }
</div>

<br/>

<table class="table">
    <tr>
        @*<th>
            @Html.DisplayNameFor(model => model.AssignedToCase.status)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.projectName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.bugDesc)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.attachments)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.status)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.priority)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.comments)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.createdDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.updatedDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.dueDate)
        </th>
        <th></th>
    </tr>
@if (Model.Count() == 0)
{
    <tr>
        <td colspan="8"> No rows match search citeria </td>
    </tr>
}
else
{
    foreach (var item in Model)
    {
    <tr>
        @*<td>
            @Html.DisplayFor(modelItem => item.AssignedToCase.status)
        </td>*@
        <td>
            @Html.DisplayFor(modelItem => item.projectName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.bugDesc)
        </td>
        <td>
            <img src="@Url.Content(@item.attachments)" alt="hello" width="50" height="50" />
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.priority)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.comments)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.createdDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.updatedDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.dueDate)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.bugID }) 
            @Html.ActionLink("Details", "Details", new { id = item.bugID }) 
            @Html.ActionLink("Delete", "Delete", new { id = item.bugID })
        </td>
    </tr>
    }
}

</table>
